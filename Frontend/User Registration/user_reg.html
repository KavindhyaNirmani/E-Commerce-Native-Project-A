<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Registration</title>

  <link rel="stylesheet" href="../User Registration/user_reg.css">


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>

  <section class="vh-100" style="background-image: linear-gradient(#6C6A6A,#1E1E1E); overflow: hidden;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-6 px-0 d-none d-sm-block  " style="position: relative;">
          <img src="../Assets/Image2.jpg" alt="Login image" class="w-100 vh-100 image-section"
            style="object-fit: cover; object-position: left;">

          <div class="text-overlay position-absolute top-0 end-0 p-3">
            <h2 class="text-white">Gather & Grub</h2>
          </div>
        </div>


        <div class="col-sm-6 header pt-5" style="
         font-family: 'Lato',sans-serif;">
          <div class="px-2 py-0 ms-xl-2 text-center">
            
            <p class="h3 fw-bold mb-0 text-white text-style ">Start your delicious journey with us</p>

            <h3 class="pb-2" style="color:#FAFF00; ">Sign up now!</h3>
          </div>


          <div
            class="d-flex justify-content-center align-items-center px-2 ms-xl-4 mt-0 pt-0 pt-xl-0 mt-xl-n5">

            <form  method="POST" class="needs-validation" novalidate style="font-family: 'Lato', sans-serif;">

              <div class=" form-group row custom-padding">
                <label for="username" class="col-md-3 col-form-label">Email</label>
                <div class="col-md-9">
                  <input type="email" class="form-control " id="email" placeholder="Enter your email" required>
                  <div class="invalid-feedback">
                    Please enter your Email
                  </div>
                </div>
              </div>

          

              <div class=" form-group row custom-padding">
                <label for="username" class="col-md-3 col-form-label">Username</label>
                <div class="col-md-9">
                  <input type="text" class="form-control " id="username" placeholder="Enter your username"  required>
                  <div class="invalid-feedback">
                    Please enter your username
                  </div>
                </div>
              </div>

              <div class=" form-group row custom-padding">
                <label for="password" class="col-md-3 col-form-label">Password</label>
                <div class="col-md-9">
                  <input type="password" class="form-control " id="password"  placeholder="Enter your password" required>
                  <div class="invalid-feedback">
                    Please enter your Password
                  </div>
                </div>
              </div>

              <div class="form-group row custom-padding">
                <label for="password" class="col-md-3 col-form-label">Confirm Password</label>
                <div class="col-md-9">
                  <input type="password" class="form-control " id="confirmPassword"  placeholder="Confirm your password" required>
                  <div class="invalid-feedback">
                    Please confirm your password
                  </div>
                </div>
              </div>



              <button type="submit" class="btn mt-3 w-100 fw-bold custom-hover p-1">Signup</button>

              <p>Already a Member?
                <a href="../User Login/user_login.html"> Login</a>
              </p>

          </div>

          </form>


        </div>
      </div>
    </div>
  </div>
</section>


  <script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
      'use strict';
  
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.querySelectorAll('.needs-validation');
  
      // Loop over them and prevent submission
      Array.prototype.slice.call(forms).forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }

          form.classList.add('was-validated');
        }, false);
      });
    })();

    async function registerUser(event) {
      event.preventDefault();  // Prevent form from submitting the default way

      // Fetch form values
      const email = document.getElementById('email').value;
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;

      // Simple password matching validation
     if (password !== confirmPassword) {
         alert('Password do not match');
         return;
      }

      try {
          // Send a POST request to the backend
          const response = await fetch('http://localhost:5010/auth/register', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ email,username, password})
          });

          const data = await response.json();
          if (response.ok) {
              alert('Registration successful!');  
             // window.location.href = '/Frontend/User Login/user_login.html';  // Redirect to login page
          } else {
              alert(data.message || 'Registration failed');
          }
      } catch (error) {
          console.error('Error:', error);
          alert('An error occurred. Please try again.');
      }
  }

  // Attach the registerUser function to the form's submit event
  document.querySelector('form').addEventListener('submit', registerUser)

</script>


  </script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>

</html>