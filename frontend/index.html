<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gather and Grab</title>
    <link rel="icon" type="image/png" href="./assets/images/logo.png?v=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous" />
    <!--Custom CSS-->
    <link rel="stylesheet" href="./assets/styles/index.css" />
    <!--Google font-->
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"
      rel="stylesheet" />
    <!-- jQuery-->
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      crossorigin="anonymous"></script>
    <!-- Popper.js and Bootstrap JS -->
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body
    style="
      font-family: 'Lato', sans-serif;
      background-image: linear-gradient(#6c6a6a, #1e1e1e);
      height: 100%;
    ">
    <!-- Navbar -->
    <div id="headerPlaceholder"></div>

    <script>
      fetch("./assets/widgets/header.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("headerPlaceholder").innerHTML = data;
          // Ensure the offcanvas background color is set after loading
          const offcanvasNavbar = document.getElementById("offcanvasNavbar");
          offcanvasNavbar.style.backgroundColor = "black";
        })
        .catch((error) => console.error("Error loading header:", error));
    </script>

    <!--Welcome section-->
    <div
      id="carouselExampleFade"
      class="carousel slide carousel-fade"
      data-bs-ride="carousel"
      data-bs-interval="5000">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img
            src="./assets/images/main-bg1.png"
            class="d-block w-100"
            alt="slide1" />
          <div class="carousel-caption carousel">
            <h2>Welcome To</h2>
            <h1>Gather & Grab!!</h1>
          </div>
        </div>
        <div class="carousel-item">
          <img
            src="./assets/images/beverage-bg-img.jpg"
            class="d-block w-100"
            alt="slide2" />
          <div class="carousel-caption carousel">
            <h2>Welcome To</h2>
            <h1>Gather & Grab!!</h1>
          </div>
        </div>
        <div class="carousel-item">
          <img
            src="./assets/images/main-bg3.png"
            class="d-block w-100"
            alt="slide3" />
          <div class="carousel-caption carousel">
            <h2>Welcome To</h2>
            <h1>Gather & Grab!!</h1>
          </div>
        </div>
      </div>
    </div>

    <!--Features section-->
    <section class="features">
      <div class="feature">
        <img src="./assets/images/feature-pizza.png" alt="Pizza" />
        <h3>Fresh Pizza</h3>
        <p>We serve fresh, hand-tossed pizza with authentic ingredients.</p>
      </div>
      <div class="feature">
        <img src="./assets/images/feature-delivery.png" alt="Delivery" />
        <h3>Fast & Fresh Delivery</h3>
        <p>
          Get your pizzas delivered fresh and fast to satisfy your cravings.
        </p>
      </div>
      <div class="feature">
        <img src="./assets/images/feature-dessert.png" alt="Dessert" />
        <h3>Sweet Desserts</h3>
        <p>Our sweet treats will give you the perfect end to your meal.</p>
      </div>
    </section>

    <!--About section-->

    <section class="about section-padding">
      <div class="container" id="about">
        <div class="row align-items-center">
          <!--text side-->
          <div class="col-lg-6 col-md-7 col-12">
            <div class="about-text">
              <h2>About Our Restaurant</h2>
              <p>
                At Gather and Grab, we’re passionate about making your food
                experience effortless and enjoyable. From cheesy pizzas to
                mouthwatering cakes and refreshing beverages, our menu has
                something for everyone. With a focus on quality ingredients and
                exceptional service, we make it easy for you to order your
                favorite dishes and have them delivered right to your doorstep.
                Whether it’s a casual meal or a special celebration, Gather and
                Grab is here to satisfy your cravings and make every moment
                delicious!
              </p>
            </div>
          </div>
          <!--image side-->
          <div class="col-lg-6 col-md-5 col-12 mt-4 mt-md-0">
            <div class="about-img">
              <img
                src="./assets/images/about-img.webp"
                alt="about-img"
                class="img-fluid" />
            </div>
          </div>
          <h5>Our Mission</h5>
          <p>
            At Gather and Grab, our mission is simple: to connect people with
            the food they love, in the easiest and most convenient way possible.
            We understand how busy life can get, and that’s why we’ve built a
            platform where great meals are just a click away. Whether you’re in
            the mood for comfort food or something sweet, we’re here to make
            your dining experience effortless and enjoyable.
          </p>

          <h5>Why Choose Us?</h5>

          <ul>
            <li>
              <strong>Wide Variety : </strong> From savory pizzas to indulgent
              cakes and thirst-quenching beverages, we offer a diverse selection
              of dishes for every taste and occasion.
            </li>
            <li>
              <strong>Quality Ingredients : </strong> We believe that great food
              starts with the best ingredients. Our meals are crafted using
              fresh, high-quality products to ensure every bite is packed with
              flavor.
            </li>
            <li>
              <strong>Easy Ordering :</strong> Our user-friendly platform allows
              you to browse, select, and order your favorite meals with ease,
              whether you’re at home or on the go.
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Menu Section -->
    <section class="our menu-padding" style="margin: 8px">
      <div class="container" id="menu">
        <div class="menutopic text-center">
          <h2>Our Menu</h2>
        </div>
        <div
          class="row justify-content-center align-items-center row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mt-3">
          <!-- Pizza -->
          <div class="col d-flex justify-content-center">
            <div class="card text-center" id="pizzaCard">
              <div class="card-img-container">
                <img
                  src="./assets/images/menu-pizza.jfif"
                  class="card-img-top img-fluid"
                  alt="pizza" />
              </div>
              <div class="card-body">
                <a href="./pizza.html">
                  <button class="btn btn-warning">Pizza</button>
                </a>
              </div>
            </div>
          </div>
          <!-- Cake -->
          <div class="col d-flex justify-content-center">
            <div class="card text-center" id="cakeCard">
              <div class="card-img-container">
                <img
                  src="./assets/images/menu-cake.png"
                  class="card-img-top img-fluid"
                  alt="cake" />
              </div>
              <div class="card-body">
                <a href="./cake.html">
                  <button class="btn btn-warning">Cakes</button>
                </a>
              </div>
            </div>
          </div>
          <!-- Beverages -->
          <div class="col d-flex justify-content-center">
            <div class="card text-center" id="beverageCard">
              <div class="card-img-container">
                <img
                  src="./assets/images/menu-beverage.png"
                  class="card-img-top img-fluid"
                  alt="beverage" />
              </div>
              <div class="card-body">
                <a href="./beverages.html">
                  <button class="btn btn-warning">Beverages</button>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Offer section -->
    <!-- Special Offer Section -->
    <div class="container my-5" id="promotion">
      <h2 class="text-center mb-4">Special Offers</h2>

      <!-- Offer Images -->
      <div class="row" id="offerSection"></div>

      <!-- Container to align the "View More" button to the right -->
      <div class="button-container d-flex justify-content-between mt-4">
        <button
          id="viewMoreBtn"
          class="btn btn-secondary"
          style="display: none">
          View More
        </button>
      </div>
    </div>

    <!-- Footer Section -->
    <div id="footerPlaceholder"></div>
    <script>
      fetch("./assets/widgets/footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footerPlaceholder").innerHTML = data;
        })
        .catch((error) => console.error("Error loading footer:", error));

      // Offcanvas background color
      const offcanvasNavbar = document.getElementById("offcanvasNavbar");
      offcanvasNavbar.addEventListener("show.bs.offcanvas", function () {
        offcanvasNavbar.style.backgroundColor = "black";
      });
    </script>
    <!-- Custom JS -->
    <script>
      let allOfferData = []; // Store all offer images
      let offerLimit = 1; // Initially show 1 offer image

      // Fetch all offers and store them
      fetch("https://ecom-back-t1.netfy.app/offers") // Replace with your actual API endpoint
        .then((response) => {
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          return response.json();
        })
        .then((data) => {
          allOfferData = data;

          if (allOfferData.length === 0) {
            displayNoOffersMessage(); // Display "No offers yet" if no data
          } else {
            displayOfferItems(allOfferData.slice(0, offerLimit)); // Show 1 image initially
            if (allOfferData.length > offerLimit) {
              document.getElementById("viewMoreBtn").style.display = "block"; // Show "View More" button if more images exist
            }
          }
        })
        .catch((error) => {
          console.error("Error loading offers data:", error);
          displayNoOffersMessage(); // Display "No offers yet" if there is an error fetching offers
        });

      // Function to display offer items
      function displayOfferItems(items) {
        const offerSection = document.getElementById("offerSection");

        // Clear the section before appending new items
        offerSection.innerHTML = "";

        items.forEach((item) => {
          const offerItem = document.createElement("div");
          offerItem.classList.add("col-md-4", "col-sm-6", "mb-4"); // Bootstrap grid classes
          offerItem.innerHTML = `
      <div class="offer-item">
          <img src="${item.offer_image}" alt="Special Offer">
      </div>
    `;
          offerSection.appendChild(offerItem);
        });
      }

      // Display message if no offers are available
      function displayNoOffersMessage() {
        const offerSection = document.getElementById("offerSection");
        offerSection.innerHTML = `
    <div class="col-12 text-center" id="notOfferMessage">
      <h4>No offers yet</h4>
    </div>
  `;
      }

      // Handle "View More" button click
      document
        .getElementById("viewMoreBtn")
        .addEventListener("click", function () {
          const additionalOffers = allOfferData.slice(offerLimit); // Load all remaining items
          displayOfferItems(additionalOffers); // Display all images
          document.getElementById("viewMoreBtn").style.display = "none"; // Hide button after showing all offers
        });
    </script>
  </body>
</html>
